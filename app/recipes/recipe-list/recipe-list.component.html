<ActionBar class="action-bar" title="Recipes">
    <NavigationButton icon="res://ic_menu_white_24dp" (tap)="drawerSvc.toggle()"></NavigationButton>
    <ActionItem (tap)="changeView('grid')">
        <Button [text]="'mdi-dashboard' | fonticon" class="mdi action-item"></Button>
    </ActionItem>
    <ActionItem (tap)="changeView('list')">
        <Button [text]="'mdi-view-list' | fonticon" class="mdi action-item"></Button>
    </ActionItem>
    <ActionItem (tap)="toggleSearching()">
        <Button [text]="'mdi-search' | fonticon" class="mdi action-item"></Button>
    </ActionItem>
    <ActionItem (tap)="changeQuery()">
        <Button [text]="'mdi-filter-list' | fonticon" class="mdi action-item"></Button>
    </ActionItem>
</ActionBar>
<!--
<TabView #tabView (selectedIndexChanged)="tabIdxChange(tabView.selectedIndex)" androidSelectedTabHighlightColor="#00c853"
    selectedTabTextColor="#00c853" tabTextColor="rgba(255,255,255,.5)" tabBackgroundColor="#151F2F">
    -->
<TabView #tabView (selectedIndexChanged)="tabIdxChange(tabView.selectedIndex)">
    <StackLayout *tabItem="{title: 'My recipes'}">
        <SearchBar *ngIf="!isLoadingPrivate && isSearching" #searchQuery hint="Search recipe" (clear)="clearSearchPrivate()" [text]="searchQueryPrivate" (submit)="searchPrivate(searchQuery.text)"></SearchBar>
        <GridLayout rows="*">
            <ActivityIndicator row="0" class="activity-indicator" width="75" height="75" [visibility]="isLoadingPrivate ? 'visible' : 'collapse'" [busy]="isLoadingPrivate"></ActivityIndicator>
            <RadListView row="0" [items]="filteredPrivate" loadOnDemandMode="Manual" (loadMoreDataRequested)="loadMorePrivate($event)" pullToRefresh="true" (pullToRefreshInitiated)="refreshPrivate($event)" selectionBehavior="Press" (itemSelected)="showOptions($event)">
                <ListViewGridLayout *ngIf="gridView" tkListViewLayout scrollDirection="Vertical" itemHeight="250" spanCount="2"></ListViewGridLayout>
                <ListViewLinearLayout *ngIf="listView" tkListViewLayout scrollDirection="Vertical" itemInsertAnimation="Default" itemDeleteAnimation="Default"></ListViewLinearLayout>
                <template tkListItemTemplate let-recipe="item">
                    <GridLayout rows="*, auto">
                        <android>
                            <FrescoDrawee [imageUri]="recipe.image" height="150"></FrescoDrawee>
                        </android>
                        <ios>
                            <Image [imageUri]="recipe.image" stretch="aspectFill" loadMode="async"></Image>
                        </ios>
                        <StackLayout row="1" class="recipe-container">
                            <Label [text]="recipe.name" class="recipe-title"></Label>
                            <Label text="by {{recipe.chef.name}}" class="recipe-author"></Label>
                        </StackLayout>
                    </GridLayout>
                </template>
            </RadListView>
            <FAB row="0" icon="res://ic_add_white_24dp" rippleColor="#f1f1f1" class="fab-button" row="1" (tap)="addRecipe()"></FAB>
        </GridLayout>
    </StackLayout>
    <StackLayout *tabItem="{title: 'Other recipes'}">
        <SearchBar *ngIf="!isLoadingShared && isSearching" #searchQuery hint="Search recipe" (clear)="clearSearchShared()" [text]="searchQueryShared" (submit)="searchShared(searchQuery.text)"></SearchBar>
        <GridLayout rows="*">
            <ActivityIndicator class="activity-indicator" width="75" height="75" [visibility]="isLoadingShared ? 'visible' : 'collapse'" [busy]="isLoadingShared"></ActivityIndicator>
            <RadListView [items]="filteredShared" loadOnDemandMode="Manual" (loadMoreDataRequested)="loadMoreShared($event)" pullToRefresh="true" (pullToRefreshInitiated)="refreshShared($event)" selectionBehavior="Press" (itemSelected)="openDetails($event)">
                <ListViewGridLayout *ngIf="gridView" tkListViewLayout scrollDirection="Vertical" itemHeight="250" spanCount="2"></ListViewGridLayout>
                <ListViewLinearLayout *ngIf="listView" tkListViewLayout scrollDirection="Vertical" itemInsertAnimation="Default" itemDeleteAnimation="Default"></ListViewLinearLayout>
                <template tkListItemTemplate let-recipe="item">
                    <GridLayout rows="*, auto">
                        <android>
                            <FrescoDrawee [imageUri]="recipe.image" height="150"></FrescoDrawee>
                        </android>
                        <ios>
                            <Image [imageUri]="recipe.image" stretch="aspectFill" loadMode="async"></Image>
                        </ios>
                        <StackLayout row="1" class="recipe-container">
                            <Label [text]="recipe.name" class="recipe-title"></Label>
                            <Label text="by {{recipe.chef.name}}" class="recipe-author"></Label>
                        </StackLayout>
                    </GridLayout>
                </template>
            </RadListView>
        </GridLayout>
    </StackLayout>
</TabView>